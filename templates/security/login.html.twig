{% extends 'base.html.twig' %}

{% block title %}Log in!{% endblock %}

{% block body %}

    <main class="form-signin">
        <form action="{{ path('app_login') }}" method="post">
            <img class="mb-4" src="{{ asset('logo.png') }}" alt="" height="200">

            {% for message in app.flashes('danger') %}
                <div class="alert alert-danger">
                    {{ message }}
                </div>
            {% endfor %}

            {% if error %}
                <div class="alert alert-info">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
            {% endif %}

            {% if app.user %}
                <div class="mb-3">
                    You are logged in as {{ app.user.username }}, <a href="{{ path('app_logout') }}">Logout</a>
                </div>
            {% endif %}

            <h1 class="h3 mb-3 fw-normal">Пожалуйста войдите</h1>

            <div class="form-floating">
                <input type="text" id="phone" name="phone" class="form-control" value="{{ last_username }}" autocomplete="username" required autofocus/>
                <label for="phone">Phone:</label>
            </div>

            <div class="form-floating">
                <input type="password" id="password" name="password" class="form-control" autocomplete="current-password" required />
                <label for="password">Password:</label>
            </div>

            <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}" />

            <button class="w-100 btn btn-lg btn-primary" type="submit">Войти</button>
            <a href="{{ url('app_register') }}" class="w-100 btn btn-link">Регистрация</a>
            <p class="mt-5 mb-3 text-muted">&copy; {{ 'now' | date('Y') }}</p>
        </form>
    </main>

{% endblock %}
